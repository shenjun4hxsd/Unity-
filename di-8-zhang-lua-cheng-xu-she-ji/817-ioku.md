##I/O库

&emsp;&emsp;I/O库为文件操作提供了两种不同的模型，简单模型（simple model）和完整模型（complete model）。简单模型假设有一个当前输入文件和一个当前输出文件，它的I/O操作均作用于这些文件。完整模型则使用显式的文件句柄。它采用了面向对象的风格，并将所有的操作定义为文件句柄上的方法。

&emsp;&emsp;在本书前面的章节示例中涉及到的简单操作都使用简单模型并且十分方便。但是对于更多的高级文件操作，例如同时读取多个文件，它就无法做到了。对于这些高级操作，需要使用完整模型。

&emsp;&emsp;

#####&emsp;&emsp;简单I/O模型

&emsp;&emsp;简单模型的所有操作都作用于两个当前文件。I/O库将当前输入文件初始化为进程标准输入（stdin），将当前输出文件初始化为进程标准输出（stdout）。在执行io.read()操作时，就会从标准输入中读取一行。

&emsp;&emsp;用函数io.input和io.output可以改变这两个当前文件。io.input(filename)调用会以只读模式打开指定的文件，并将其设为当前输入文件。之后除非再次调用io.input，否则所有的输入都将来源于这个文件。在输出方面，io.output也可以完成类似的工作。如果出现错误，这两个函数都会引发（raise）错误。如果想直接处理这些错误，则必须使用完整模型中的io.open。

&emsp;&emsp;通常write比read简单些，首先看一下write。函数io.write接受任意数量的字符串参数，并将它们写入当前输出文件。它也可以接受数字参数，数字参数会根据常规的转换规则转换为字符串。如果想要完全地控制这种转换，则应该使用函数string.format：

```lua
    >io.write("sin (3) = ", math.sin(3), "\n")
    --> sin (3) = 0.14112000805987
    >io.write(string.format("sin (3) = %.4f\n", math.sin(3)))
    --> sin (3) = 0.1411
```