##表达式

&emsp;&emsp;表达式用于表示值。Lua的表达式中可以包含数字常量、字面字符串、变量、一元和二元操作符及函数调用。另外有别于传统的是，表达式中还可以包括函数定义和table构造式。

###• 算术操作符

    +（加法）、-（减法）、*（乘法）、／（除法）、^（指数）、%（取模）、-（负号）
    
```lua
    例如：
        x^0.5 将计算x的平方根
        x^(-1/3) 将计算x立方根的倒数
```

```lua
    取模操作符是根据以下规则定义的：
        a%b == a - floor(a/b)*b
        
    例如：
        x%1 的结果就是x的小数部分
        x - x%1 的结果就是其整数部分
        x - x%0.01 则是x精确到小数点后两位的结果
        
        x = math.pi
        print(x - x%0.01)   --> 3.14
```

###• 关系操作符

    <、>、<=、>=、==、~=
    所有这些操作符的运算结果都是true或false。

    操作符==用于相等性测试，操作符～=用于不等性测试。
    这两个操作符可以应用于任意两个值。
    
    如果两个值具有不同的类型，Lua就认为它们是不相等的。
    否则，Lua会根据它们的类型来比较。
    
    nil只与其自身相等。
    
    对于table、userdata和函数，Lua是作引用比较的。
    也就是说，只有当它们引用同一个对象时，才认为它们相等。
    
```lua
    a = {}; a.x = 1; a.y = 0
    b = {}; b.x = 1; b.y = 0
    c = a
    其结果是a==c，但a~=b。
```

>Lua会在遇到字符串和数字的大小比较时引发一个错误，例如2<"15"就会导致这种错误。

###• 逻辑操作符

    and、or、not
    与条件控制语句一样，所有的逻辑操作符将false和nil视为假，而将其他的任何东西视为真。
    
    对于操作符and来说，如果它的第一个操作数为假，就返回第一个操作数；不然返回第二个操作数。
    
    对于操作符or来说，如果它的第一个操作数为真，就返回第一个操作数；不然返回第二个操作数。

```lua
    print(4 and 5)        --> 5
    print(nil and 13)     --> nil
    print(false and 13)   --> false
    print(4 or 5)         --> 4
    print(false or 5)     --> 5
```

    and和or都是用“短路求值”，也就是说，它们只会在需要时才去评估第二个操作数。
    短路求值可以确保像（type(v)=="table" and v.tag == "h1"）这样的表达式不会导致运行时错误。









