##tableåº“

&emsp;&emsp;`table`åº“æ˜¯ç”±ä¸€äº›è¾…åŠ©å‡½æ•°æ„æˆçš„ï¼Œè¿™äº›å‡½æ•°å°†`table`ä½œä¸ºæ•°ç»„æ¥æ“ä½œã€‚å…¶ä¸­ï¼Œæœ‰ç”¨äºåœ¨åˆ—è¡¨ä¸­æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„å‡½æ•°ï¼Œæœ‰å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œæ’åºçš„å‡½æ•°ï¼Œè¿˜æœ‰è¿æ¥ä¸€ä¸ªæ•°ç»„ä¸­æ‰€æœ‰å­—ç¬¦ä¸²çš„å‡½æ•°ã€‚

&emsp;&emsp;

####æ’å…¥å’Œåˆ é™¤

&emsp;&emsp;å‡½æ•°table.insertç”¨äºå°†ä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°ä¸€ä¸ªæ•°ç»„çš„æŒ‡å®šä½ç½®ï¼Œå®ƒä¼šç§»åŠ¨åç»­å…ƒç´ ä»¥ç©ºå‡ºç©ºé—´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ`t`æ˜¯æ•°ç»„`{10, 20, 30}`ï¼Œå½“è°ƒç”¨`table.insert(t, 1, 15)`åï¼Œ`t`ä¼šå˜ä¸º`{15, 10, 20, 30}`ã€‚ä½†æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¦‚æœåœ¨è°ƒç”¨`insert`æ—¶æ²¡æœ‰æŒ‡å®šä½ç½®å‚æ•°ï¼Œåˆ™ä¼šå°†å…ƒç´ æ·»åŠ åˆ°æ•°ç»„æœ«å°¾ã€‚ä¸‹é¢è¿™æ®µä»£ç é€è¡Œåœ°è¯»å–äº†ç¨‹åºçš„è¾“å…¥ï¼Œå¹¶å°†æ‰€æœ‰çš„è¡Œä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼š

```lua
    t = {}
    for line in io.lines() do
        table.insert(t, line)
    end
    print(#t)            -->(è¯»å…¥çš„è¡Œæ•°)
```

&emsp;&emsp;å‡½æ•°`table.remove`ä¼šåˆ é™¤ï¼ˆå¹¶è¿”å›ï¼‰æ•°ç»„æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ ï¼Œå¹¶å°†è¯¥ä½ç½®ä¹‹åçš„æ‰€æœ‰å…ƒç´ å‰ç§»ï¼Œä»¥å¡«è¡¥ç©ºéš™ã€‚å¦‚æœåœ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ä¸æŒ‡å®šä½ç½®å‚æ•°ï¼Œå®ƒå°±ä¼šåˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚

&emsp;&emsp;æœ‰äº†è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°æ ˆã€é˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—ã€‚å¯ä»¥ç”¨`t={}`æ¥åˆå§‹åŒ–è¿™ç§ç»“æ„ï¼Œ`table.insert(t, x)`ç­‰ä»·äºå‹å…¥æ“ä½œï¼Œ`table.remove(t)`ç­‰ä»·äºå¼¹å‡ºæ“ä½œã€‚`table.insert(t,1,x)`ä¼šåœ¨ç»“æ„çš„å¦ä¸€ç«¯ï¼ˆä¹Ÿå°±æ˜¯èµ·å§‹å¤„ï¼‰æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ ï¼Œè€Œ`table.remove(t,1)`ä¼šä»è¿™ä¸€ç«¯åˆ é™¤å…ƒç´ ã€‚åä¸¤ä¸ªæ“ä½œä¸æ˜¯å¾ˆé«˜æ•ˆï¼Œå› ä¸ºå®ƒä»¬å¿…é¡»ç§»åŠ¨å…ƒç´ ã€‚ä¸è¿‡ç”±äº`table`åº“ä¸­çš„å‡½æ•°éƒ½æ˜¯ç”¨Cè¯­è¨€å®ç°çš„ï¼Œæ‰€ä»¥è¿™äº›å¾ªç¯çš„èŠ±é”€å¹¶ä¸é«˜ï¼Œå¯¹äºè¾ƒå°çš„æ•°ç»„æ¥è¯´ä½¿ç”¨è¿™ç§å®ç°è¾ƒå¥½ã€‚

&emsp;&emsp;

####æ’åº

&emsp;&emsp;å¦ä¸€ä¸ªæœ‰ç”¨çš„æ•°ç»„å‡½æ•°æ˜¯`table.sort`ï¼Œæˆ‘ä»¬åœ¨æ­¤ä¹‹å‰å·²ç»ç”¨åˆ°è¿‡å®ƒã€‚å®ƒå¯ä»¥å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œæ’åºï¼Œè¿˜å¯ä»¥æŒ‡å®šä¸€ä¸ªå¯é€‰çš„æ¬¡åºå‡½æ•°ã€‚è¿™ä¸ªæ¬¡åºå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æœå¸Œæœ›ç¬¬ä¸€ä¸ªå‚æ•°åœ¨æ’åºç»“æœä¸­ä½äºç¬¬äºŒä¸ªå‚æ•°å€¼å‰ï¼Œå°±åº”å½“è¿”å›`true`ã€‚å¦‚æœæ²¡æœ‰æä¾›è¿™ä¸ªå‡½æ•°ï¼Œ`sort`å°±ä½¿ç”¨é»˜è®¤çš„å°äºæ“ä½œã€‚

&emsp;&emsp;ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯è¯•å›¾å¯¹ä¸€ä¸ª`table`çš„ç´¢å¼•è¿›è¡Œæ’åºã€‚åœ¨`table`ä¸­ï¼Œç´¢å¼•æ˜¯ä¸€ä¸ªæ— åºçš„é›†åˆã€‚å¦‚æœå¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œåˆ™å¿…é¡»å°†å®ƒä»¬å¤åˆ¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åå¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œæ’åºã€‚ä¸‹é¢æ¼”ç¤ºä¸€ä¸ªç¤ºä¾‹ï¼Œå‡è®¾è¦è¯»å–ä¸€ä¸ªæºæ–‡ä»¶ï¼Œå¹¶æ„å»ºä¸€ä¸ª`table`è®°å½•æ¯ä¸ªå‡½æ•°å¹¶å®šä¹‰å®ƒçš„è¡Œå·ï¼š

```lua
    lines = {
        luaH_set = 10,
        luaH_get = 24,
        luaH_present = 48,
    }
```

&emsp;&emsp;ç°åœ¨è¦æ±‚æŒ‰å­—æ¯æ¬¡åºæ‰“å°è¿™äº›å‡½æ•°åã€‚å¦‚æœä½¿ç”¨`pairs`æ¥éå†è¿™ä¸ª`table`ï¼Œå°±ä¼šå‘ç°éå†æ‰€å¾—çš„åç§°æ˜¯æ— åºçš„ã€‚ç”±äºè¿™äº›åç§°æ˜¯`table`çš„`key`ï¼Œå› æ­¤ä¸èƒ½å¯¹å®ƒä»¬è¿›è¡Œç›´æ¥æ’åºã€‚ä½†æ˜¯ï¼Œå¯ä»¥å°†å®ƒä»¬æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åå¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œæ’åºã€‚æ­£ç¡®çš„åšæ³•æ˜¯å…ˆç”¨è¿™äº›åç§°åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œç„¶åå¯¹æ•°ç»„æ’åºï¼Œæœ€åæ‰“å°ç»“æœï¼š

```lua
    a = {}
    for n in pairs(lines) do a[#a+1] = n end
    table.sort(a)
    for i,n in ipairs(a) do print(n) end
```

&emsp;&emsp;æ³¨æ„ï¼Œå¯¹äºLuaæ¥è¯´ï¼Œæ•°ç»„ä¹Ÿæ˜¯æ— åºçš„ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯`table`ã€‚ç„¶è€Œç”±äºç”¨æˆ·çŸ¥é“å¦‚ä½•è®¡ç®—ç´¢å¼•ï¼Œå› æ­¤åœ¨è®¿é—®æ•°ç»„æ—¶ï¼Œåªè¦ä½¿ç”¨æœ‰åºçš„ç´¢å¼•ï¼Œå°±å¯ä»¥é¡ºåºåœ°è®¿é—®æ•°ç»„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¿…é¡»ç”¨`ipairs`è€Œä¸æ˜¯`pairs`æ¥éå†æ•°ç»„çš„åŸå› ã€‚å‰è€…ä½¿`key`ä¸º`1ã€2ã€......`çš„é¡ºåºï¼Œè€Œåè€…é‡‡ç”¨`table`çš„åŸå§‹é¡ºåºã€‚

&emsp;&emsp;å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ›´é«˜çº§çš„æ–¹æ³•ï¼Œå°±æ˜¯å†™ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½¿å®ƒæ ¹æ®`table key`çš„æ¬¡åºæ¥è¿›è¡Œéå†ã€‚åŒæ—¶ï¼Œè¿˜æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°`f`ï¼Œç”¨äºæŒ‡å®šæŸç§ç‰¹æ®Šæ¬¡åºã€‚ä»¥ä¸‹å‡½æ•°å…ˆå°†`key`æ’åºåˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åè¿­ä»£è¿™ä¸ªæ•°ç»„ï¼Œä¸”æ¯æ­¥éƒ½è¿”å›åŸ`table`ä¸­`key`å’Œ`value`ã€‚

```lua
    function pairsByKeys(t, f)
        local a = {}
        for n in pairs(t) do a[#a+1] = n end
        table.sort(a, f)
        local i = 0          -- è¿­ä»£å™¨å˜é‡
        return function()    -- è¿­ä»£å™¨å‡½æ•°
            i = i + 1
            return a[i], t[a[i]]
        end
    end
```

&emsp;&emsp;é€šè¿‡è¿™ä¸ªå‡½æ•°å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°æŒ‰å­—æ¯æ¬¡åºæ¥æ‰“å°é‚£äº›å‡½æ•°åäº†ï¼š

```lua
    for name, line in pairsByKeys(line) do
        print(name, line)
    end
```

&emsp;&emsp;

####è¿æ¥

&emsp;&emsp;åœ¨æ•°æ®ç»“æ„ç« èŠ‚ä¸­å·²ç»çœ‹åˆ°è¿‡`table.concat`ã€‚å®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå¹¶è¿”å›è¿™äº›å­—ç¬¦ä¸²è¿æ¥åçš„ç»“æœã€‚å®ƒæœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šæ’åˆ°å­—ç¬¦ä¸²ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚è¿™ä¸ªå‡½æ•°å¦å¤–è¿˜æ¥å—ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªè¦è¿æ¥çš„å­—ç¬¦ä¸²ç´¢å¼•ã€‚

&emsp;&emsp;ä¸‹é¢è¿™ä¸ªå‡½æ•°æ˜¯`table.concat`çš„ä¸€ä¸ªæ‰©å±•ï¼Œå®ƒèƒ½å¤„ç†åµŒå¥—çš„å­—ç¬¦ä¸²æ•°ç»„ï¼š

```lua
    function rconcat(l)
        if type(l) ~= "table" then return l end
        local res = {}
        for i=1, #l do
            res[i] = rconcat(l[i])
        end
        return table.concat(res)
    end
```

&emsp;&emsp;å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œ`rconcat`éƒ½é€’å½’åœ°è°ƒç”¨è‡ªå·±ï¼Œä»¥æ­¤æ¥è¿æ¥æ‰€æœ‰å¯èƒ½åµŒå¥—çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚æœ€åï¼Œå®ƒè°ƒç”¨`table.concat`æ¥è¿æ¥è¿™äº›ç»“æœéƒ¨åˆ†ã€‚

```lua
    print(rconcat{{"a", {" nice"}}, " and", {{" long"}, {" list"}}})
    --> a nice and long list
```


ğŸ”š